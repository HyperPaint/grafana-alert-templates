{{ define "hyperpaint.four.header" -}}
  {{- if .Status -}}
    {{- if eq .Status "resolved" -}}{{- "üü¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...\n" -}}{{- end -}}
    {{- if eq .Status "firing" -}}{{- "üî¥ –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è!\n" -}}{{- end -}}
  {{- end -}}
{{- end -}}
 
{{ define "hyperpaint.four.body" -}}
  {{- if .Status -}}
    {{- if eq .Status "resolved" -}}{{- "‚òÄ " -}}{{- end -}}
    {{- if eq .Status "firing" -}}{{- "‚õàÔ∏è " -}}{{- end -}}
  {{- end -}}

  {{- if (index .Alerts 0).Labels.alertname -}}
    {{- (index .Alerts 0).Labels.alertname -}}{{- "\n" -}}
  {{- end -}}

  {{- range $a := .Alerts -}}

    {{- if $a.Values -}}
      {{- range $k, $v := $a.Values -}}
        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- if eq (len $k) 1 -}}{{- continue -}}{{- end -}}

        {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}} 
        {{- "üåÄ " -}}{{ $k }}: {{ $v }}{{- "\n" -}}
      {{- end -}}
    {{- end -}}

    {{- if $a.Labels -}}
      {{- range $k, $v := $a.Labels -}}
        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- if eq $k "_test" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "_onlyfiring" -}}{{- continue -}}{{- end -}}

        {{- if eq $k "asds_id" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "ASDS_ID" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "ci_id" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "CI_ID" -}}{{- continue -}}{{- end -}}

        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Grafana */}}
        {{- if eq $k "grafana_folder" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "alertname" -}}{{- continue -}}{{- end -}}

        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Prometheus / VictoriaMetrics */}}
        {{- if eq $k "job" -}}{{- continue -}}{{- end -}}

        {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- "‚Ä¢ " -}}{{ $k }}: {{ $v }}{{- "\n" -}}
      {{- end -}}
    {{- end -}}  

  {{- end -}}

  {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ */}}
  {{- if (index .Alerts 0).Annotations.summary -}}
    {{- "üí¨ " -}}{{ (index .Alerts 0).Annotations.summary -}}{{- "\n" -}}
  {{- end -}}

{{- end -}}

{{ define "hyperpaint.four.body.full" -}}
  {{- if .Status -}}
    {{- if eq .Status "resolved" -}}{{- "‚òÄ " -}}{{- end -}}
    {{- if eq .Status "firing" -}}{{- "‚õàÔ∏è " -}}{{- end -}}
  {{- end -}}

  {{- if (index .Alerts 0).Labels.alertname -}}
    {{- (index .Alerts 0).Labels.alertname -}}{{- "\n" -}}
  {{- end -}}

  {{- range $a := .Alerts -}}

    {{- if $a.Values -}}
      {{- range $k, $v := $a.Values -}}
        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- if eq (len $k) 1 -}}{{- continue -}}{{- end -}}

        {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}} 
        {{- "üåÄ " -}}{{ $k }}: {{ $v }}{{- "\n" -}}
      {{- end -}}
    {{- end -}}

    {{- if $a.Labels -}}
      {{- range $k, $v := $a.Labels -}}
        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- if eq $k "_test" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "_onlyfiring" -}}{{- continue -}}{{- end -}}

        {{- if eq $k "asds_id" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "ASDS_ID" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "ci_id" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "CI_ID" -}}{{- continue -}}{{- end -}}

        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Grafana */}}
        {{- if eq $k "grafana_folder" -}}{{- continue -}}{{- end -}}
        {{- if eq $k "alertname" -}}{{- continue -}}{{- end -}}

        {{/* –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Prometheus / VictoriaMetrics */}}
        {{- if eq $k "job" -}}{{- continue -}}{{- end -}}

        {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */}}
        {{- "‚Ä¢ " -}}{{ $k }}: {{ $v }}{{- "\n" -}}
      {{- end -}}
    {{- end -}} 

    {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Å—ã–ª–∫–∏ */}}
    {{- if $a.PanelURL -}}
      {{- if ne $a.PanelURL "" -}}
        {{- "‚Ä¢ –ø–∞–Ω–µ–ª—å üëÄ " -}}{{ $a.PanelURL -}}{{- "\n" -}}
      {{- end -}}
    {{- else -}}
      {{- if $a.DashboardURL -}}
        {{- if ne $a.DashboardURL "" -}}
          {{- "‚Ä¢ –¥–∞—à–±–æ—Ä–¥ üëÄ " -}}{{ $a.DashboardURL -}}{{- "\n" -}}
        {{- end -}}
      {{- end -}}
    {{- end -}}

  {{- end -}}

  {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ */}}
  {{- if (index .Alerts 0).Annotations.summary -}}
    {{- "üí¨ " -}}{{ (index .Alerts 0).Annotations.summary -}}{{- "\n" -}}
  {{- end -}}

{{- end -}}

{{ define "hyperpaint.four.footer" -}}
  {{ "\n@HyperPaintBot" }}
{{- end -}}

{{ define "hyperpaint.four.footer.full" -}}
  {{- if (index .Alerts 0).Annotations.description -}}
    {{- "üí¨ –ü–æ–¥—Ä–æ–±–Ω–µ–µ\n" -}}{{ (index .Alerts 0).Annotations.description -}}{{- "\n" -}}
  {{- end -}}

  {{- if (index .Alerts 0).Annotations.runbook_url -}}
    {{- "üí¨ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è\n" -}}{{ (index .Alerts 0).Annotations.runbook_url -}}{{- "\n" -}}
  {{- end -}}

  {{/* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Å—ã–ª–∫–∏ */}}
  {{- if .SilenceURL -}}
    {{- if ne .SilenceURL "" -}}
      {{- "üîá –ó–∞–≥–ª—É—à–∏—Ç—å\n" -}}{{ .SilenceURL -}}{{- "\n" -}}
    {{- end -}}
  {{- end -}} 

  {{ "\n@HyperPaintBot" }}
{{- end -}}
 
{{ define "hyperpaint.four" -}}
  {{- template "hyperpaint.four.header" . -}}
  {{- template "hyperpaint.four.body" . -}}
  {{- template "hyperpaint.four.footer" . -}}
{{- end -}}
 
{{ define "hyperpaint.four.short" -}}
  {{- template "hyperpaint.four.body" . -}}
  {{- template "hyperpaint.four.footer" . -}}
{{- end -}}
 
{{ define "hyperpaint.four.full" -}}
  {{- template "hyperpaint.four.body.full" . -}}
  {{- template "hyperpaint.four.footer.full" . -}}
{{- end -}}

{{ template "hyperpaint.four" . }}

{{ template "hyperpaint.four.short" . }}

{{ template "hyperpaint.four.full" . }}
